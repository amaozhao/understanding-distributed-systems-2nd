# 总结

如果你选择任何有关分布式系统或数据库系统的教科书，我保证你会找到专门针对本部分讨论的主题的整章。事实上，你可以找到关于它们的整本书！尽管你可能会争辩说你不太可能必须从头开始实现诸如状态机复制之类的核心分布式算法，但我认为至少看过一次这些算法很重要，因为这将使你成为它们提供的抽象的更好“用户” .

我希望你从这部分中吸取两个重要的见解。一是在分布式系统中故障是不可避免的，二是协调是昂贵的。

到现在为止，你应该已经意识到，使我们讨论的协调算法如此复杂的是它们必须容忍故障。以 Raft 为例。想象一下，如果网络可靠并且进程不会崩溃，那么实现会变得多么简单。如果你对 Raft 或链复制设计中的一个或多个边缘案例感到惊讶，那么你并不孤单。这东西太难了！容错在堆栈的任何级别都发挥着重要作用，这就是我将第四部分专门介绍它的原因。

另一个重要的收获是协调会增加复杂性并影响可扩展性和性能。因此，你应该尽可能通过以下方式减少协调：

- 像链复制一样，使协调远离关键路径；
- 当发现不一致时，不协调地进行并“道歉”，就像 sagas 一样；
- 使用无需协调即可保证某种形式的一致性的协议，例如 CRDT。