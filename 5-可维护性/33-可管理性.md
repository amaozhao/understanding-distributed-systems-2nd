# 可管理性

运营商使用可观察性工具来了解其应用程序的行为，但他们还需要一种无需更改代码即可修改行为的方法。这方面的一个例子是将应用程序的新版本发布到生产环境中，我们之前已经讨论过了。另一个例子是通过修改应用程序的配置来改变应用程序的行为方式。

应用程序通常取决于各种配置设置。有些会影响其行为，例如内部缓存的最大大小，而另一些则包含秘密，例如访问外部数据存储的凭据。由于设置因环境而异并且可能包含敏感信息，因此不应对其进行硬编码。

为了将应用程序与其配置分离，可以将配置持久保存在专用存储[^1]中，例如 AWS AppConfig[^2] 或 Azure App Configuration[^3]。

在部署时，CD 管道可以从存储中读取配置并通过环境变量将其传递给应用程序。这种方法的缺点是如果不重新部署应用程序就无法更改配置。

为了使应用程序能够对配置更改做出反应，它需要在运行时定期重新读取配置并应用更改。例如，如果 HTTP 处理程序的构造函数依赖于特定的配置设置，则当该设置更改时需要重新创建处理程序。

一旦可以动态更改配置设置，就可以通过设置来发布新功能来切换（启用/禁用）它们。这允许在最初禁用新功能的情况下发布构建。稍后，可以为一小部分应用程序实例（或用户）启用该功能，以在它完全推出之前建立起它按预期工作的信心。同样，可以使用相同的机制来执行 A/B 测试[^4]。

--------------------

[^1]: "以音速进行连续配置": https://www.allthingsdistributed.com/2021/08/continuous-configuration-on-aws.html
[^2]: "AWS AppConfig 文档": https://docs.aws.amazon.com/appconfig/
[^3]: "Azure 应用程序配置": https://azure.microsoft.com/en-us/services/app-configuration/
[^4]: "A/B 测试": https://en.wikipedia.org/wiki/A/B_testing